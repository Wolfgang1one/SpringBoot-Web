import{f as B,p as j}from"./api.ae6dea3f.js";import{r as s,m as oe,b as f,c as ne,o,j as m,f as a,e as t,F as v,i as E,l as b,g as V,w as de,d as c,E as D}from"./index.a78e2dbf.js";const re=E("div",{style:{"margin-top":"40px"}},null,-1),se=E("div",{style:{"margin-top":"20px"}},null,-1),pe={class:"dialog-footer"},ie={class:"dialog-footer"},ge={__name:"User",setup(fe){const q=s(!1),N=s({}),I=s([]),U=s([]),w=s([]),F=s([]),$=s(""),x=s(""),L=s(""),M=s(""),O=s(10),J=[10,20,30,50],T=s(!1),k=s(!1),u=s({id:"",userName:"",realName:"",useType:"",useTypeName:"",docTitleID:"",docTitle:"",isScheduling:"",deptID:"",dept:"",registLeID:"",registLe:""}),z=s({userName:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"}],realName:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D",trigger:"blur"}]});oe(async()=>{g(1),Q(),K(8,100,U),K(13,100,I),P()});async function K(d,l,n){let p=`/constantitem/page?ctype=${d}&count=${l}&pn=1`;const i=await B(p,null);i.result?n.value=i.data.records:i.errMsg=="\u672A\u767B\u5F55"&&router.push("/login")}async function P(){const l=await B("/registlevel/page?count=100&pn=1",null);l.result?F.value=l.data.records:l.errMsg=="\u672A\u767B\u5F55"&&router.push("/login")}async function Q(){const l=await B("/department/page?&count=200&pn=1",null);l.result?w.value=l.data.records:l.errMsg=="\u672A\u767B\u5F55"&&router.push("/login")}async function g(d){q.value=!0;let l=`/user/page?count=${O.value}&pn=${d}`;$!=""&&(l+=`&keyword=${$.value}`),x!=""&&(l+=`&userType=${x.value}`),M!=""&&(l+=`&dept=${M.value}`),L!=""&&(l+=`&docType=${L.value}`);const n=await B(l,null);n.result?(N.value=n.data,q.value=!1):n.errMsg=="\u672A\u767B\u5F55"&&router.push("/login")}function X(d){g(d)}function Y(d){k.value=!0,u.value=d}function W(){u.value={id:"",userName:"",realName:"",useType:"",useTypeName:"",docTitleID:"",docTitle:"",isScheduling:"",deptID:"",dept:"",registLeID:"",registLe:""}}function Z(){console.log(u.value.deptType),j("/user/update",u.value).then(d=>{d.data.result?(k.value=!1,g(N.value.current),D.alert("\u4FEE\u6539\u6210\u529F","\u63D0\u793A",{})):(result.errMsg=="\u672A\u767B\u5F55"&&router.push("/login"),D.alert(d.data.errMsg,"\u63D0\u793A",{}))})}function h(){j("/user/add",u.value).then(d=>{d.data.result?(T.value=!1,D.alert("\u65B0\u589E\u6210\u529F","\u63D0\u793A",{})):(result.errMsg=="\u672A\u767B\u5F55"&&router.push("/login"),D.alert(d.data.errMsg,"\u63D0\u793A",{}))})}function ee(d){D.confirm("\u786E\u8BA4\u662F\u5426\u5220\u9664?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(()=>{var l=new FormData;l.append("id",d),j("/user/del",l).then(n=>{n.data.result?(g(N.value.current),D.alert("\u5220\u9664\u6210\u529F","\u63D0\u793A",{})):(result.errMsg=="\u672A\u767B\u5F55"&&router.push("/login"),D.alert(n.data.errMsg,"\u63D0\u793A",{}))})})}return(d,l)=>{const n=f("el-option"),p=f("el-select"),i=f("el-col"),C=f("el-input"),_=f("el-button"),R=f("el-row"),y=f("el-table-column"),le=f("el-table"),ae=f("el-pagination"),r=f("el-form-item"),S=f("el-radio"),A=f("el-radio-group"),G=f("el-form"),H=f("el-dialog"),te=ne("loading");return o(),m(v,null,[a(R,null,{default:t(()=>[a(i,{span:3,style:{"padding-right":"20px"}},{default:t(()=>[a(p,{modelValue:x.value,"onUpdate:modelValue":l[0]||(l[0]=e=>x.value=e),class:"m-2",filterable:"",clearable:"",onClear:l[1]||(l[1]=e=>g(1)),placeholder:"\u7528\u6237\u7C7B\u578B",onChange:l[2]||(l[2]=e=>g(1))},{default:t(()=>[(o(!0),m(v,null,b(I.value,e=>(o(),c(n,{key:e.id,label:e.constantCode+e.constantName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{span:3,style:{"padding-right":"20px"}},{default:t(()=>[a(p,{modelValue:M.value,"onUpdate:modelValue":l[3]||(l[3]=e=>M.value=e),class:"m-2",filterable:"",clearable:"",onClear:l[4]||(l[4]=e=>g(1)),placeholder:"\u6240\u5728\u79D1\u5BA4",onChange:l[5]||(l[5]=e=>g(1))},{default:t(()=>[(o(!0),m(v,null,b(w.value,e=>(o(),c(n,{key:e.id,label:e.deptCode+e.deptName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{span:3,style:{"padding-right":"20px"}},{default:t(()=>[a(p,{modelValue:L.value,"onUpdate:modelValue":l[6]||(l[6]=e=>L.value=e),class:"m-2",filterable:"",clearable:"",onClear:l[7]||(l[7]=e=>g(1)),placeholder:"\u533B\u751F\u804C\u79F0",onChange:l[8]||(l[8]=e=>g(1))},{default:t(()=>[(o(!0),m(v,null,b(U.value,e=>(o(),c(n,{key:e.id,label:e.constantCode+e.constantName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{span:5,style:{"padding-right":"20px"}},{default:t(()=>[a(C,{modelValue:$.value,"onUpdate:modelValue":l[9]||(l[9]=e=>$.value=e),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u6216\u59D3\u540D",class:"w-100 m-2"},null,8,["modelValue"])]),_:1}),a(i,{span:3},{default:t(()=>[a(_,{type:"primary",onClick:l[10]||(l[10]=e=>g(1))},{default:t(()=>[V("\u67E5\u8BE2")]),_:1})]),_:1}),a(i,{span:4}),a(i,{span:3},{default:t(()=>[a(_,{type:"danger",onClick:l[11]||(l[11]=e=>T.value=!0)},{default:t(()=>[V("\u65B0\u589E\u7528\u6237")]),_:1})]),_:1})]),_:1}),re,a(R,{class:"m-2"},{default:t(()=>[a(i,{span:24},{default:t(()=>[de((o(),c(le,{data:N.value.records,style:{width:"100%"}},{default:t(()=>[a(y,{fixed:"",prop:"id",label:"\u5E8F\u53F7",width:"80",align:"center"}),a(y,{prop:"userName",label:"\u7528\u6237\u540D",align:"center"}),a(y,{prop:"realName",label:"\u59D3\u540D",align:"center"}),a(y,{prop:"useTypeName",label:"\u7528\u6237\u7C7B\u578B",align:"center"}),a(y,{prop:"docTitle",label:"\u533B\u751F\u804C\u79F0",align:"center"}),a(y,{prop:"dept",label:"\u6240\u5728\u79D1\u5BA4",align:"center"}),a(y,{prop:"isScheduling",label:"\u6392\u73ED",align:"center"}),a(y,{prop:"registLe",label:"\u6302\u53F7\u7EA7\u522B",align:"center"}),a(y,{fixed:"right",label:"Operations",align:"center"},{default:t(e=>[a(_,{link:"",type:"primary",onClick:ue=>Y(e.row)},{default:t(()=>[V("\u7F16\u8F91")]),_:2},1032,["onClick"]),a(_,{link:"",type:"danger",onClick:ue=>ee(e.row.id)},{default:t(()=>[V("\u5220\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[te,q.value]])]),_:1})]),_:1}),se,a(R,null,{default:t(()=>[a(i,{span:20},{default:t(()=>[a(ae,{background:"",layout:"prev, pager, next",total:N.value.total,"page-count":N.value.pages,onCurrentChange:X},null,8,["total","page-count"])]),_:1}),a(i,{span:4},{default:t(()=>[a(p,{modelValue:O.value,"onUpdate:modelValue":l[12]||(l[12]=e=>O.value=e),class:"m-2",placeholder:"\u6BCF\u9875\u884C\u6570",onChange:l[13]||(l[13]=e=>g(1))},{default:t(()=>[(o(),m(v,null,b(J,e=>a(n,{key:e,label:e,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(H,{modelValue:k.value,"onUpdate:modelValue":l[23]||(l[23]=e=>k.value=e),title:"\u7F16\u8F91",onClose:W},{footer:t(()=>[E("span",pe,[a(_,{onClick:l[22]||(l[22]=e=>k.value=!1)},{default:t(()=>[V("\u53D6\u6D88")]),_:1}),a(_,{type:"primary",onClick:Z},{default:t(()=>[V(" \u4FDD\u5B58 ")]),_:1})])]),default:t(()=>[a(G,{model:u.value,rules:z.value,"label-width":"100px"},{default:t(()=>[a(r,{label:"\u7F16\u53F7",prop:"id"},{default:t(()=>[a(C,{modelValue:u.value.id,"onUpdate:modelValue":l[14]||(l[14]=e=>u.value.id=e),readonly:"",autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(r,{label:"\u7528\u6237\u7C7B\u578B",prop:"useType"},{default:t(()=>[a(p,{modelValue:u.value.useType,"onUpdate:modelValue":l[15]||(l[15]=e=>u.value.useType=e),class:"m-2",placeholder:"\u7528\u6237\u7C7B\u578B"},{default:t(()=>[(o(!0),m(v,null,b(I.value,e=>(o(),c(n,{key:e.id,label:e.constantCode+e.constantName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(r,{label:"\u6240\u5728\u79D1\u5BA4",prop:"deptID"},{default:t(()=>[a(p,{modelValue:u.value.deptID,"onUpdate:modelValue":l[16]||(l[16]=e=>u.value.deptID=e),filterable:"",class:"m-2",placeholder:"\u7528\u6237\u7C7B\u578B"},{default:t(()=>[(o(!0),m(v,null,b(w.value,e=>(o(),c(n,{key:e.id,label:e.deptCode+e.deptName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(r,{label:"\u533B\u751F\u804C\u79F0",prop:"docTitleID"},{default:t(()=>[a(p,{modelValue:u.value.docTitleID,"onUpdate:modelValue":l[17]||(l[17]=e=>u.value.docTitleID=e),class:"m-2",filterable:"",placeholder:"\u7528\u6237\u7C7B\u578B"},{default:t(()=>[(o(!0),m(v,null,b(U.value,e=>(o(),c(n,{key:e.id,label:e.constantCode+e.constantName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(r,{label:"\u6302\u53F7\u7EA7\u522B",prop:"registLeID"},{default:t(()=>[a(p,{modelValue:u.value.registLeID,"onUpdate:modelValue":l[18]||(l[18]=e=>u.value.registLeID=e),class:"m-2",filterable:"",placeholder:"\u6302\u53F7\u7EA7\u522B"},{default:t(()=>[(o(!0),m(v,null,b(F.value,e=>(o(),c(n,{key:e.id,label:e.registCode+e.registName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(r,{label:"\u7528\u6237\u540D",prop:"userName"},{default:t(()=>[a(C,{modelValue:u.value.userName,"onUpdate:modelValue":l[19]||(l[19]=e=>u.value.userName=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(r,{label:"\u59D3\u540D",prop:"realName"},{default:t(()=>[a(C,{modelValue:u.value.realName,"onUpdate:modelValue":l[20]||(l[20]=e=>u.value.realName=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(r,{label:"\u662F\u5426\u6392\u73ED",prop:"isScheduling"},{default:t(()=>[a(A,{modelValue:u.value.isScheduling,"onUpdate:modelValue":l[21]||(l[21]=e=>u.value.isScheduling=e)},{default:t(()=>[a(S,{label:"\u662F"},{default:t(()=>[V("\u662F")]),_:1}),a(S,{label:"\u5426"},{default:t(()=>[V("\u5426")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),a(H,{modelValue:T.value,"onUpdate:modelValue":l[33]||(l[33]=e=>T.value=e),title:"\u65B0\u589E",onClose:W},{footer:t(()=>[E("span",ie,[a(_,{onClick:l[32]||(l[32]=e=>T.value=!1)},{default:t(()=>[V("\u53D6\u6D88")]),_:1}),a(_,{type:"primary",onClick:h},{default:t(()=>[V(" \u65B0\u589E ")]),_:1})])]),default:t(()=>[a(G,{model:u.value,rules:z.value,"label-width":"100px"},{default:t(()=>[a(r,{label:"\u7F16\u53F7",prop:"id"},{default:t(()=>[a(C,{modelValue:u.value.id,"onUpdate:modelValue":l[24]||(l[24]=e=>u.value.id=e),readonly:"",autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(r,{label:"\u7528\u6237\u7C7B\u578B",prop:"useType"},{default:t(()=>[a(p,{modelValue:u.value.useType,"onUpdate:modelValue":l[25]||(l[25]=e=>u.value.useType=e),class:"m-2",filterable:"",placeholder:"\u7528\u6237\u7C7B\u578B"},{default:t(()=>[(o(!0),m(v,null,b(I.value,e=>(o(),c(n,{key:e.id,label:e.constantCode+e.constantName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(r,{label:"\u6240\u5728\u79D1\u5BA4",prop:"deptID"},{default:t(()=>[a(p,{modelValue:u.value.deptID,"onUpdate:modelValue":l[26]||(l[26]=e=>u.value.deptID=e),filterable:"",class:"m-2",placeholder:"\u6240\u5728\u79D1\u5BA4"},{default:t(()=>[(o(!0),m(v,null,b(w.value,e=>(o(),c(n,{key:e.id,label:e.deptCode+e.deptName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(r,{label:"\u533B\u751F\u804C\u79F0",prop:"docTitleID"},{default:t(()=>[a(p,{modelValue:u.value.docTitleID,"onUpdate:modelValue":l[27]||(l[27]=e=>u.value.docTitleID=e),filterable:"",class:"m-2",placeholder:"\u7528\u6237\u7C7B\u578B"},{default:t(()=>[(o(!0),m(v,null,b(U.value,e=>(o(),c(n,{key:e.id,label:e.constantCode+e.constantName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(r,{label:"\u6302\u53F7\u7EA7\u522B",prop:"registLeID"},{default:t(()=>[a(p,{modelValue:u.value.registLeID,"onUpdate:modelValue":l[28]||(l[28]=e=>u.value.registLeID=e),filterable:"",class:"m-2",placeholder:"\u6302\u53F7\u7EA7\u522B"},{default:t(()=>[(o(!0),m(v,null,b(F.value,e=>(o(),c(n,{key:e.id,label:e.registCode+e.registName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(r,{label:"\u7528\u6237\u540D",prop:"userName"},{default:t(()=>[a(C,{modelValue:u.value.userName,"onUpdate:modelValue":l[29]||(l[29]=e=>u.value.userName=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(r,{label:"\u59D3\u540D",prop:"realName"},{default:t(()=>[a(C,{modelValue:u.value.realName,"onUpdate:modelValue":l[30]||(l[30]=e=>u.value.realName=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(r,{label:"\u662F\u5426\u6392\u73ED",prop:"isScheduling"},{default:t(()=>[a(A,{modelValue:u.value.isScheduling,"onUpdate:modelValue":l[31]||(l[31]=e=>u.value.isScheduling=e)},{default:t(()=>[a(S,{label:"\u662F"},{default:t(()=>[V("\u662F")]),_:1}),a(S,{label:"\u5426"},{default:t(()=>[V("\u5426")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])],64)}}};export{ge as default};
