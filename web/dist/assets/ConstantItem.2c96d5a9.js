import{r as s,m as X,b as u,c as Y,o as i,j as w,f as a,e as t,F as k,i as _,l as U,g as v,w as F,d as $,E as b,v as Z}from"./index.a78e2dbf.js";import{f as S,p as B}from"./api.ae6dea3f.js";const ee={class:"grid-content ep-bg-purple-dark"},le={class:"grid-content ep-bg-purple-dark"},ae=_("div",{style:{"margin-top":"40px"}},null,-1),te=_("div",{style:{"margin-top":"20px"}},null,-1),oe={class:"dialog-footer"},ne={class:"dialog-footer"},re={__name:"ConstantItem",setup(ue){const M=s(!1),g=s({}),T=s([]),h=s(""),N=s(""),L=s(10),O=[10,20,30,50],y=s(!1),V=s(!1),n=s({id:0,constantTypeID:"",constantCode:"",constantName:""}),I=s({constantCode:[{required:!0,message:"\u8BF7\u8F93\u5165\u9879\u7F16\u7801",trigger:"blur"}],constantName:[{required:!0,message:"\u8BF7\u8F93\u5165\u9879\u540D\u79F0",trigger:"blur"}]});X(async()=>{p(1),j()});async function j(){const l=await S("/constant/page?count=50&pn=1",null);l.result?T.value=l.data.records:l.errMsg=="\u672A\u767B\u5F55"&&router.push("/login")}async function p(o){M.value=!0;let l=`/constantitem/page?count=${L.value}&pn=${o}`;h!=""&&(l+=`&keyword=${h.value}`),N!=""&&(l+=`&ctype=${N.value}`);const d=await S(l,null);d.result?(g.value=d.data,M.value=!1):d.errMsg=="\u672A\u767B\u5F55"&&router.push("/login")}function z(o){p(o)}function K(o){V.value=!0,n.value=o}function x(){n.value={id:0,constantTypeID:"",constantCode:"",constantName:""}}function R(){B("/constantitem/update",n.value).then(o=>{o.data.result?(V.value=!1,p(g.value.current),b.alert("\u4FEE\u6539\u6210\u529F","\u63D0\u793A",{})):(result.errMsg=="\u672A\u767B\u5F55"&&router.push("/login"),b.alert(o.data.errMsg,"\u63D0\u793A",{}))})}function A(){B("/constantitem/add",n.value).then(o=>{o.data.result?(y.value=!1,b.alert("\u65B0\u589E\u6210\u529F","\u63D0\u793A",{})):(result.errMsg=="\u672A\u767B\u5F55"&&router.push("/login"),b.alert(o.data.errMsg,"\u63D0\u793A",{}))})}function G(o){b.confirm("\u786E\u8BA4\u662F\u5426\u5220\u9664?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(()=>{var l=new FormData;l.append("id",o),B("/constantitem/del",l).then(d=>{d.data.result?(p(g.value.current),b.alert("\u5220\u9664\u6210\u529F","\u63D0\u793A",{})):(result.errMsg=="\u672A\u767B\u5F55"&&router.push("/login"),b.alert(d.data.errMsg,"\u63D0\u793A",{}))})})}return(o,l)=>{const d=u("el-option"),D=u("el-select"),r=u("el-col"),c=u("el-input"),m=u("el-button"),W=u("el-row"),C=u("el-table-column"),H=u("el-table"),J=u("el-pagination"),f=u("el-form-item"),E=u("el-form"),q=u("el-dialog"),P=Y("loading");return i(),w(k,null,[a(W,null,{default:t(()=>[a(r,{span:5},{default:t(()=>[_("div",ee,[a(D,{modelValue:N.value,"onUpdate:modelValue":l[0]||(l[0]=e=>N.value=e),class:"m-2",filterable:"",clearable:"",onClear:l[1]||(l[1]=e=>p(1)),placeholder:"\u5E38\u6570\u636E\u7C7B\u522B",onChange:l[2]||(l[2]=e=>p(1))},{default:t(()=>[(i(!0),w(k,null,U(T.value,e=>(i(),$(d,{key:e.id,label:e.constantTypeCode+e.constantTypeName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1}),a(r,{span:5},{default:t(()=>[_("div",le,[a(c,{modelValue:h.value,"onUpdate:modelValue":l[3]||(l[3]=e=>h.value=e),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u5E38\u6570\u9879\u7F16\u7801\u6216\u540D\u79F0",class:"w-100 m-2"},null,8,["modelValue"])])]),_:1}),a(r,{span:1}),a(r,{span:4,class:"m-2"},{default:t(()=>[a(m,{type:"primary",onClick:l[4]||(l[4]=e=>p(1))},{default:t(()=>[v("\u67E5\u8BE2")]),_:1})]),_:1}),a(r,{span:5}),a(r,{span:4},{default:t(()=>[a(m,{type:"danger",onClick:l[5]||(l[5]=e=>y.value=!0)},{default:t(()=>[v("\u65B0\u589E\u6570\u636E\u9879")]),_:1})]),_:1})]),_:1}),ae,a(W,{class:"m-2"},{default:t(()=>[a(r,{span:24},{default:t(()=>[F((i(),$(H,{data:g.value.records,style:{width:"100%"}},{default:t(()=>[a(C,{fixed:"",prop:"id",label:"\u5E8F\u53F7",width:"80",align:"center"}),a(C,{prop:"constantTypeName",label:"\u7C7B\u522B\u540D\u79F0",align:"center"}),a(C,{prop:"constantCode",label:"\u5E38\u6570\u636E\u9879\u7F16\u7801",align:"center"}),a(C,{prop:"constantName",label:"\u5E38\u6570\u636E\u9879\u540D\u79F0",align:"center"}),a(C,{fixed:"right",label:"Operations",align:"center"},{default:t(e=>[a(m,{link:"",type:"primary",onClick:Q=>K(e.row)},{default:t(()=>[v("\u7F16\u8F91")]),_:2},1032,["onClick"]),a(m,{link:"",type:"danger",onClick:Q=>G(e.row.id)},{default:t(()=>[v("\u5220\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[P,M.value]])]),_:1})]),_:1}),te,a(W,null,{default:t(()=>[a(r,{span:20},{default:t(()=>[a(J,{background:"",layout:"prev, pager, next",total:g.value.total,"page-count":g.value.pages,onCurrentChange:z},null,8,["total","page-count"])]),_:1}),a(r,{span:4},{default:t(()=>[a(D,{modelValue:L.value,"onUpdate:modelValue":l[6]||(l[6]=e=>L.value=e),class:"m-2",placeholder:"\u6BCF\u9875\u884C\u6570",onChange:l[7]||(l[7]=e=>p(1))},{default:t(()=>[(i(),w(k,null,U(O,e=>a(d,{key:e,label:e,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(q,{modelValue:V.value,"onUpdate:modelValue":l[13]||(l[13]=e=>V.value=e),title:"\u7F16\u8F91",onClose:x},{footer:t(()=>[_("span",oe,[a(m,{onClick:l[12]||(l[12]=e=>V.value=!1)},{default:t(()=>[v("\u53D6\u6D88")]),_:1}),a(m,{type:"primary",onClick:R},{default:t(()=>[v(" \u4FDD\u5B58 ")]),_:1})])]),default:t(()=>[a(E,{model:n.value,rules:I.value},{default:t(()=>[a(f,{label:"\u7F16\u53F7","label-width":o.formLabelWidth,prop:"id"},{default:t(()=>[a(c,{modelValue:n.value.id,"onUpdate:modelValue":l[8]||(l[8]=e=>n.value.id=e),readonly:"",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(f,{label:"\u7C7B\u522B\u7F16\u7801","label-width":o.formLabelWidth,prop:"constantTypeCode"},{default:t(()=>[a(D,{modelValue:n.value.constantTypeID,"onUpdate:modelValue":l[9]||(l[9]=e=>n.value.constantTypeID=e),class:"m-2",filterable:"",placeholder:"\u5E38\u6570\u636E\u7C7B\u522B"},{default:t(()=>[(i(!0),w(k,null,U(T.value,e=>(i(),$(d,{key:e.id,label:e.constantTypeName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),a(f,{label:"\u7C7B\u522B\u7F16\u7801","label-width":o.formLabelWidth,prop:"constantTypeCode"},{default:t(()=>[a(c,{modelValue:n.value.constantCode,"onUpdate:modelValue":l[10]||(l[10]=e=>n.value.constantCode=e),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(f,{label:"\u7C7B\u522B\u540D\u79F0","label-width":o.formLabelWidth,prop:"constantTypeName"},{default:t(()=>[a(c,{modelValue:n.value.constantName,"onUpdate:modelValue":l[11]||(l[11]=e=>n.value.constantName=e),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),a(q,{modelValue:y.value,"onUpdate:modelValue":l[19]||(l[19]=e=>y.value=e),title:"\u65B0\u589E",onClose:x},{footer:t(()=>[_("span",ne,[a(m,{onClick:l[18]||(l[18]=e=>y.value=!1)},{default:t(()=>[v("\u53D6\u6D88")]),_:1}),a(m,{type:"primary",onClick:A},{default:t(()=>[v(" \u65B0\u589E ")]),_:1})])]),default:t(()=>[a(E,{model:n.value,rules:I.value},{default:t(()=>[F(a(f,{label:"\u7F16\u53F7","label-width":o.formLabelWidth,prop:"id"},{default:t(()=>[a(c,{modelValue:n.value.id,"onUpdate:modelValue":l[14]||(l[14]=e=>n.value.id=e),readonly:"",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),[[Z,!1]]),a(f,{label:"\u7C7B\u522B\u7F16\u7801","label-width":o.formLabelWidth,prop:"constantTypeCode"},{default:t(()=>[a(D,{modelValue:n.value.constantTypeID,"onUpdate:modelValue":l[15]||(l[15]=e=>n.value.constantTypeID=e),class:"m-2",filterable:"",placeholder:"\u5E38\u6570\u636E\u7C7B\u522B"},{default:t(()=>[(i(!0),w(k,null,U(T.value,e=>(i(),$(d,{key:e.id,label:e.constantTypeName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),a(f,{label:"\u7C7B\u522B\u7F16\u7801","label-width":o.formLabelWidth,prop:"constantTypeCode"},{default:t(()=>[a(c,{modelValue:n.value.constantCode,"onUpdate:modelValue":l[16]||(l[16]=e=>n.value.constantCode=e),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(f,{label:"\u7C7B\u522B\u540D\u79F0","label-width":o.formLabelWidth,prop:"constantTypeName"},{default:t(()=>[a(c,{modelValue:n.value.constantName,"onUpdate:modelValue":l[17]||(l[17]=e=>n.value.constantName=e),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])],64)}}};export{re as default};
