import{f as O,p as W}from"./api.ae6dea3f.js";import{r as i,m as Q,b as r,c as X,o as m,j as N,f as l,e as t,F as k,i as _,l as $,g as v,w as Y,d as q,E as b}from"./index.a78e2dbf.js";const Z={class:"grid-content ep-bg-purple-dark"},ee={class:"grid-content ep-bg-purple-dark"},le=_("div",{style:{"margin-top":"40px"}},null,-1),ae=_("div",{style:{"margin-top":"20px"}},null,-1),te={class:"dialog-footer"},oe={class:"dialog-footer"},re={__name:"DiseCategory",setup(ne){const D=i(!1),g=i({}),T=i([]),h=i(""),U=i(""),L=i(10),S=[10,20,30,50],C=i(!1),w=i(!1),o=i({id:"",dicaCode:"",dicaName:"",sequenceNo:"",dicaType:""}),B=i({dicaCode:[{required:!0,message:"\u8BF7\u8F93\u5165\u9879\u7F16\u7801",trigger:"blur"}],dicaName:[{required:!0,message:"\u8BF7\u8F93\u5165\u9879\u540D\u79F0",trigger:"blur"}],sequenceNo:[{required:!0,message:"\u8BF7\u8F93\u5165\u9879\u540D\u79F0",trigger:"blur"},{type:"number",message:"\u663E\u793A\u987A\u5E8F\u53F7\u4E3A\u6570\u5B57"}],dicaType:[{required:!0,message:"\u8BF7\u9009\u4E2D\u75BE\u75C5\u7C7B\u578B",trigger:"blur"}]});Q(async()=>{f(1),j(14,100,T)});async function j(n,a,u){let y=`/constantitem/page?ctype=${n}&count=${a}&pn=1`;const d=await O(y,null);d.result?u.value=d.data.records:d.errMsg=="\u672A\u767B\u5F55"&&router.push("/login")}async function f(n){D.value=!0;let a=`/disecategory/page?count=${L.value}&pn=${n}`;h!=""&&(a+=`&keyword=${h.value}`),U!=""&&(a+=`&ctype=${U.value}`);const u=await O(a,null);u.result?(g.value=u.data,D.value=!1):u.errMsg=="\u672A\u767B\u5F55"&&router.push("/login")}function z(n){f(n)}function K(n){w.value=!0,o.value=n}function E(){o.value={id:"",dicaCode:"",dicaName:"",sequenceNo:"",dicaType:""}}function R(){W("/disecategory/update",o.value).then(n=>{n.data.result?(w.value=!1,f(g.value.current),b.alert("\u4FEE\u6539\u6210\u529F","\u63D0\u793A",{})):(result.errMsg=="\u672A\u767B\u5F55"&&router.push("/login"),b.alert(n.data.errMsg,"\u63D0\u793A",{}))})}function A(){W("/disecategory/add",o.value).then(n=>{n.data.result?(C.value=!1,b.alert("\u65B0\u589E\u6210\u529F","\u63D0\u793A",{})):(result.errMsg=="\u672A\u767B\u5F55"&&router.push("/login"),b.alert(n.data.errMsg,"\u63D0\u793A",{}))})}function G(n){b.confirm("\u786E\u8BA4\u662F\u5426\u5220\u9664?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(()=>{var a=new FormData;a.append("id",n),W("/disecategory/del",a).then(u=>{u.data.result?(f(g.value.current),b.alert("\u5220\u9664\u6210\u529F","\u63D0\u793A",{})):(result.errMsg=="\u672A\u767B\u5F55"&&router.push("/login"),b.alert(u.data.errMsg,"\u63D0\u793A",{}))})})}return(n,a)=>{const u=r("el-option"),y=r("el-select"),d=r("el-col"),p=r("el-input"),c=r("el-button"),M=r("el-row"),V=r("el-table-column"),H=r("el-table"),I=r("el-pagination"),s=r("el-form-item"),F=r("el-form"),x=r("el-dialog"),J=X("loading");return m(),N(k,null,[l(M,null,{default:t(()=>[l(d,{span:5},{default:t(()=>[_("div",Z,[l(y,{modelValue:U.value,"onUpdate:modelValue":a[0]||(a[0]=e=>U.value=e),class:"m-2",filterable:"",clearable:"",onClear:a[1]||(a[1]=e=>f(1)),placeholder:"\u75BE\u75C5\u5206\u7C7B",onChange:a[2]||(a[2]=e=>f(1))},{default:t(()=>[(m(!0),N(k,null,$(T.value,e=>(m(),q(u,{key:e.id,label:e.constantCode+e.constantName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1}),l(d,{span:5},{default:t(()=>[_("div",ee,[l(p,{modelValue:h.value,"onUpdate:modelValue":a[3]||(a[3]=e=>h.value=e),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u75BE\u75C5\u5206\u7C7B\u7F16\u7801\u6216\u540D\u79F0",class:"w-100 m-2"},null,8,["modelValue"])])]),_:1}),l(d,{span:1}),l(d,{span:4,class:"m-2"},{default:t(()=>[l(c,{type:"primary",onClick:a[4]||(a[4]=e=>f(1))},{default:t(()=>[v("\u67E5\u8BE2")]),_:1})]),_:1}),l(d,{span:5}),l(d,{span:4},{default:t(()=>[l(c,{type:"danger",onClick:a[5]||(a[5]=e=>C.value=!0)},{default:t(()=>[v("\u65B0\u589E\u75BE\u75C5\u5206\u7C7B")]),_:1})]),_:1})]),_:1}),le,l(M,{class:"m-2"},{default:t(()=>[l(d,{span:24},{default:t(()=>[Y((m(),q(H,{data:g.value.records,style:{width:"100%"}},{default:t(()=>[l(V,{fixed:"",prop:"id",label:"\u5E8F\u53F7",width:"80",align:"center"}),l(V,{prop:"dicaCode",label:"\u5206\u7C7B\u7F16\u7801",align:"center"}),l(V,{prop:"dicaName",label:"\u5206\u7C7B\u540D\u79F0",align:"center"}),l(V,{prop:"sequenceNo",label:"\u663E\u793A\u987A\u5E8F",align:"center"}),l(V,{prop:"dicaTypeName",label:"\u75BE\u75C5\u5206\u7C7B",align:"center"}),l(V,{fixed:"right",label:"Operations",align:"center"},{default:t(e=>[l(c,{link:"",type:"primary",onClick:P=>K(e.row)},{default:t(()=>[v("\u7F16\u8F91")]),_:2},1032,["onClick"]),l(c,{link:"",type:"danger",onClick:P=>G(e.row.id)},{default:t(()=>[v("\u5220\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[J,D.value]])]),_:1})]),_:1}),ae,l(M,null,{default:t(()=>[l(d,{span:20},{default:t(()=>[l(I,{background:"",layout:"prev, pager, next",total:g.value.total,"page-count":g.value.pages,onCurrentChange:z},null,8,["total","page-count"])]),_:1}),l(d,{span:4},{default:t(()=>[l(y,{modelValue:L.value,"onUpdate:modelValue":a[6]||(a[6]=e=>L.value=e),class:"m-2",placeholder:"\u6BCF\u9875\u884C\u6570",onChange:a[7]||(a[7]=e=>f(1))},{default:t(()=>[(m(),N(k,null,$(S,e=>l(u,{key:e,label:e,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(x,{modelValue:w.value,"onUpdate:modelValue":a[14]||(a[14]=e=>w.value=e),title:"\u7F16\u8F91",onClose:E},{footer:t(()=>[_("span",te,[l(c,{onClick:a[13]||(a[13]=e=>w.value=!1)},{default:t(()=>[v("\u53D6\u6D88")]),_:1}),l(c,{type:"primary",onClick:R},{default:t(()=>[v(" \u4FDD\u5B58 ")]),_:1})])]),default:t(()=>[l(F,{model:o.value,rules:B.value},{default:t(()=>[l(s,{label:"\u7F16\u53F7","label-width":n.formLabelWidth,prop:"id"},{default:t(()=>[l(p,{modelValue:o.value.id,"onUpdate:modelValue":a[8]||(a[8]=e=>o.value.id=e),readonly:"",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(s,{label:"\u75BE\u75C5\u5206\u7C7B","label-width":n.formLabelWidth,prop:"constantTypeCode"},{default:t(()=>[l(y,{modelValue:o.value.dicaType,"onUpdate:modelValue":a[9]||(a[9]=e=>o.value.dicaType=e),class:"m-2",filterable:"",placeholder:""},{default:t(()=>[(m(!0),N(k,null,$(T.value,e=>(m(),q(u,{key:e.id,label:e.constantCode+e.constantName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),l(s,{label:"\u7C7B\u522B\u7F16\u7801","label-width":n.formLabelWidth,prop:"constantTypeCode"},{default:t(()=>[l(p,{modelValue:o.value.dicaCode,"onUpdate:modelValue":a[10]||(a[10]=e=>o.value.dicaCode=e),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(s,{label:"\u7C7B\u522B\u540D\u79F0","label-width":n.formLabelWidth,prop:"constantTypeName"},{default:t(()=>[l(p,{modelValue:o.value.dicaName,"onUpdate:modelValue":a[11]||(a[11]=e=>o.value.dicaName=e),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(s,{label:"\u663E\u793A\u987A\u5E8F\u53F7","label-width":n.formLabelWidth,prop:"constantTypeName"},{default:t(()=>[l(p,{modelValue:o.value.sequenceNo,"onUpdate:modelValue":a[12]||(a[12]=e=>o.value.sequenceNo=e),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),l(x,{modelValue:C.value,"onUpdate:modelValue":a[21]||(a[21]=e=>C.value=e),title:"\u65B0\u589E",onClose:E},{footer:t(()=>[_("span",oe,[l(c,{onClick:a[20]||(a[20]=e=>C.value=!1)},{default:t(()=>[v("\u53D6\u6D88")]),_:1}),l(c,{type:"primary",onClick:A},{default:t(()=>[v(" \u65B0\u589E ")]),_:1})])]),default:t(()=>[l(F,{model:o.value,rules:B.value},{default:t(()=>[l(s,{label:"\u7F16\u53F7","label-width":n.formLabelWidth,prop:"id"},{default:t(()=>[l(p,{modelValue:o.value.id,"onUpdate:modelValue":a[15]||(a[15]=e=>o.value.id=e),readonly:"",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(s,{label:"\u75BE\u75C5\u5206\u7C7B","label-width":n.formLabelWidth,prop:"constantTypeCode"},{default:t(()=>[l(y,{modelValue:o.value.dicaType,"onUpdate:modelValue":a[16]||(a[16]=e=>o.value.dicaType=e),class:"m-2",filterable:"",placeholder:""},{default:t(()=>[(m(!0),N(k,null,$(T.value,e=>(m(),q(u,{key:e.id,label:e.constantCode+e.constantName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),l(s,{label:"\u7C7B\u522B\u7F16\u7801","label-width":n.formLabelWidth,prop:"constantTypeCode"},{default:t(()=>[l(p,{modelValue:o.value.dicaCode,"onUpdate:modelValue":a[17]||(a[17]=e=>o.value.dicaCode=e),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(s,{label:"\u7C7B\u522B\u540D\u79F0","label-width":n.formLabelWidth,prop:"constantTypeName"},{default:t(()=>[l(p,{modelValue:o.value.dicaName,"onUpdate:modelValue":a[18]||(a[18]=e=>o.value.dicaName=e),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(s,{label:"\u663E\u793A\u987A\u5E8F\u53F7","label-width":n.formLabelWidth,prop:"constantTypeName"},{default:t(()=>[l(p,{modelValue:o.value.sequenceNo,"onUpdate:modelValue":a[19]||(a[19]=e=>o.value.sequenceNo=e),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])],64)}}};export{re as default};
