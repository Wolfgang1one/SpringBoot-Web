import{f as G,p as q}from"./api.ae6dea3f.js";import{r as d,m as H,n as y,b as s,c as I,o as U,j as $,f as e,e as a,F as D,i as b,g as m,w as J,d as P,l as X,E as f}from"./index.a78e2dbf.js";const Y={class:"grid-content ep-bg-purple-dark"},Z=b("div",{style:{"margin-top":"40px"}},null,-1),h=b("div",{style:{"margin-top":"20px"}},null,-1),ee={class:"dialog-footer"},le={class:"dialog-footer"},ue={__name:"RegistLevel",setup(te){const N=d(!1),v=d({});d([]);const C=d(""),k=d(10),B=[10,20,30,50],_=d(!1),c=d(!1),o=d({id:"",registCode:"",registName:"",sequenceNo:"",registFee:"",registQuota:""}),x=d({registCode:[{required:!0,message:"\u8BF7\u8F93\u5165\u53F7\u522B\u7F16\u7801",trigger:"blur"}],registName:[{required:!0,message:"\u8BF7\u8F93\u5165\u7C7B\u522B\u540D\u79F0",trigger:"blur"}],sequenceNo:[{required:!0,message:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F\u53F7",trigger:"blur"},{type:"number",message:"\u663E\u793A\u987A\u5E8F\u53F7\u4E3A\u6570\u5B57"}],registFee:[{required:!0,message:"\u8BF7\u8F93\u5165\u6302\u53F7\u8D39",trigger:"blur"},{type:"number",message:"\u663E\u793A\u6302\u53F7\u8D39\u4E3A\u6570\u5B57"}],registQuota:[{required:!0,message:"\u8BF7\u8F93\u5165\u6302\u53F7\u9650\u989D",trigger:"blur"},{type:"number",message:"\u663E\u793A\u6302\u53F7\u9650\u989D\u4E3A\u6570\u5B57"}]});H(async()=>{V(1)});async function V(n){N.value=!0;let l=`/registlevel/page?count=${k.value}&pn=${n}`;C!=""&&(l+=`&keyword=${C.value}`);const u=await G(l,null);u.result?(v.value=u.data,N.value=!1):u.errMsg=="\u672A\u767B\u5F55"&&y.push("/login")}function E(n){V(n)}function T(n){c.value=!0,o.value=n}function F(){o.value={id:"",registCode:"",registName:"",sequenceNo:"",registFee:"",registQuota:""}}function L(){q("/registlevel/update",o.value).then(n=>{n.data.result?(c.value=!1,V(v.value.current),f.alert("\u4FEE\u6539\u6210\u529F","\u63D0\u793A",{})):(result.errMsg=="\u672A\u767B\u5F55"&&y.push("/login"),f.alert(n.data.errMsg,"\u63D0\u793A",{}))})}function O(){q("/registlevel/add",o.value).then(n=>{n.data.result?(_.value=!1,f.alert("\u65B0\u589E\u6210\u529F","\u63D0\u793A",{})):(result.errMsg=="\u672A\u767B\u5F55"&&y.push("/login"),f.alert(n.data.errMsg,"\u63D0\u793A",{}))})}function R(n){f.confirm("\u786E\u8BA4\u662F\u5426\u5220\u9664?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(()=>{var l=new FormData;l.append("id",n),q("/registlevel/del",l).then(u=>{u.data.result?(V(v.value.current),f.alert("\u5220\u9664\u6210\u529F","\u63D0\u793A",{})):(result.errMsg=="\u672A\u767B\u5F55"&&y.push("/login"),f.alert(u.data.errMsg,"\u63D0\u793A",{}))})})}return(n,l)=>{const u=s("el-input"),i=s("el-col"),p=s("el-button"),w=s("el-row"),g=s("el-table-column"),S=s("el-table"),j=s("el-pagination"),z=s("el-option"),K=s("el-select"),r=s("el-form-item"),M=s("el-form"),Q=s("el-dialog"),W=I("loading");return U(),$(D,null,[e(w,null,{default:a(()=>[e(i,{span:5},{default:a(()=>[b("div",Y,[e(u,{modelValue:C.value,"onUpdate:modelValue":l[0]||(l[0]=t=>C.value=t),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u53F7\u522B\u7F16\u7801\u6216\u540D\u79F0",class:"w-100 m-2"},null,8,["modelValue"])])]),_:1}),e(i,{span:1}),e(i,{span:4,class:"m-2"},{default:a(()=>[e(p,{type:"primary",onClick:l[1]||(l[1]=t=>V(1))},{default:a(()=>[m("\u67E5\u8BE2")]),_:1})]),_:1}),e(i,{span:10}),e(i,{span:4},{default:a(()=>[e(p,{type:"danger",onClick:l[2]||(l[2]=t=>_.value=!0)},{default:a(()=>[m("\u65B0\u589E\u6302\u53F7\u7EA7\u522B")]),_:1})]),_:1})]),_:1}),Z,e(w,{class:"m-2"},{default:a(()=>[e(i,{span:24},{default:a(()=>[J((U(),P(S,{data:v.value.records,style:{width:"100%"}},{default:a(()=>[e(g,{fixed:"",prop:"id",label:"\u5E8F\u53F7",align:"center",width:"80"}),e(g,{prop:"registCode",label:"\u53F7\u522B\u7F16\u7801",align:"center"}),e(g,{prop:"registName",label:"\u53F7\u522B\u540D\u79F0",align:"center"}),e(g,{prop:"sequenceNo",label:"\u663E\u793A\u987A\u5E8F\u53F7",align:"center"}),e(g,{prop:"registFee",label:"\u6302\u53F7\u8D39",align:"center"}),e(g,{prop:"registQuota",label:"\u6302\u53F7\u9650\u989D",align:"center"}),e(g,{fixed:"right",label:"Operations",align:"center"},{default:a(t=>[e(p,{link:"",type:"primary",onClick:A=>T(t.row)},{default:a(()=>[m("\u7F16\u8F91")]),_:2},1032,["onClick"]),e(p,{link:"",type:"danger",onClick:A=>R(t.row.id)},{default:a(()=>[m("\u5220\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[W,N.value]])]),_:1})]),_:1}),h,e(w,null,{default:a(()=>[e(i,{span:20},{default:a(()=>[e(j,{background:"",layout:"prev, pager, next",total:v.value.total,"page-count":v.value.pages,onCurrentChange:E},null,8,["total","page-count"])]),_:1}),e(i,{span:4},{default:a(()=>[e(K,{modelValue:k.value,"onUpdate:modelValue":l[3]||(l[3]=t=>k.value=t),class:"w-20 m-2",placeholder:"\u6BCF\u9875\u884C\u6570",onChange:l[4]||(l[4]=t=>V(1))},{default:a(()=>[(U(),$(D,null,X(B,t=>e(z,{key:t,label:t,value:t},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(Q,{modelValue:c.value,"onUpdate:modelValue":l[12]||(l[12]=t=>c.value=t),title:"\u7F16\u8F91",onClose:F},{footer:a(()=>[b("span",ee,[e(p,{onClick:l[11]||(l[11]=t=>c.value=!1)},{default:a(()=>[m("\u53D6\u6D88")]),_:1}),e(p,{type:"primary",onClick:L},{default:a(()=>[m(" \u4FDD\u5B58 ")]),_:1})])]),default:a(()=>[e(M,{model:o.value,rules:x.value,"label-width":"100px"},{default:a(()=>[e(r,{label:"\u7F16\u53F7",prop:"id"},{default:a(()=>[e(u,{modelValue:o.value.id,"onUpdate:modelValue":l[5]||(l[5]=t=>o.value.id=t),readonly:"",autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u53F7\u522B\u7F16\u7801",prop:"registCode"},{default:a(()=>[e(u,{modelValue:o.value.registCode,"onUpdate:modelValue":l[6]||(l[6]=t=>o.value.registCode=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u53F7\u522B\u540D\u79F0",prop:"registName"},{default:a(()=>[e(u,{modelValue:o.value.registName,"onUpdate:modelValue":l[7]||(l[7]=t=>o.value.registName=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u663E\u793A\u987A\u5E8F\u53F7",prop:"sequenceNo"},{default:a(()=>[e(u,{modelValue:o.value.sequenceNo,"onUpdate:modelValue":l[8]||(l[8]=t=>o.value.sequenceNo=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u6302\u53F7\u8D39",prop:"registFee"},{default:a(()=>[e(u,{modelValue:o.value.registFee,"onUpdate:modelValue":l[9]||(l[9]=t=>o.value.registFee=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u6302\u53F7\u9650\u989D",prop:"registQuota"},{default:a(()=>[e(u,{modelValue:o.value.registQuota,"onUpdate:modelValue":l[10]||(l[10]=t=>o.value.registQuota=t),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),e(Q,{modelValue:_.value,"onUpdate:modelValue":l[20]||(l[20]=t=>_.value=t),title:"\u65B0\u589E",onClose:F},{footer:a(()=>[b("span",le,[e(p,{onClick:l[19]||(l[19]=t=>_.value=!1)},{default:a(()=>[m("\u53D6\u6D88")]),_:1}),e(p,{type:"primary",onClick:O},{default:a(()=>[m(" \u65B0\u589E ")]),_:1})])]),default:a(()=>[e(M,{model:o.value,rules:x.value,"label-width":"100px"},{default:a(()=>[e(r,{label:"\u7F16\u53F7",prop:"id"},{default:a(()=>[e(u,{modelValue:o.value.id,"onUpdate:modelValue":l[13]||(l[13]=t=>o.value.id=t),readonly:"",autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u53F7\u522B\u7F16\u7801",prop:"registCode"},{default:a(()=>[e(u,{modelValue:o.value.registCode,"onUpdate:modelValue":l[14]||(l[14]=t=>o.value.registCode=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u53F7\u522B\u540D\u79F0",prop:"registName"},{default:a(()=>[e(u,{modelValue:o.value.registName,"onUpdate:modelValue":l[15]||(l[15]=t=>o.value.registName=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u663E\u793A\u987A\u5E8F\u53F7",prop:"sequenceNo"},{default:a(()=>[e(u,{modelValue:o.value.sequenceNo,"onUpdate:modelValue":l[16]||(l[16]=t=>o.value.sequenceNo=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u6302\u53F7\u8D39",prop:"registFee"},{default:a(()=>[e(u,{modelValue:o.value.registFee,"onUpdate:modelValue":l[17]||(l[17]=t=>o.value.registFee=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u6302\u53F7\u9650\u989D",prop:"registQuota"},{default:a(()=>[e(u,{modelValue:o.value.registQuota,"onUpdate:modelValue":l[18]||(l[18]=t=>o.value.registQuota=t),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])],64)}}};export{ue as default};
