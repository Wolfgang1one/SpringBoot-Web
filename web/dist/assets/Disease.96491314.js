import{f as x,p as W}from"./api.ae6dea3f.js";import{r,m as Q,b as n,c as X,o as m,j as w,f as a,e as t,F as D,i as V,l as U,g,w as Y,d as $,E as b}from"./index.a78e2dbf.js";const Z={class:"grid-content ep-bg-purple-dark"},ee={class:"grid-content ep-bg-purple-dark"},le=V("div",{style:{"margin-top":"40px"}},null,-1),ae=V("div",{style:{"margin-top":"20px"}},null,-1),te={class:"dialog-footer"},oe={class:"dialog-footer"},se={__name:"Disease",setup(de){const T=r(!1),c=r({}),k=r([]),N=r(""),h=r(""),L=r(10),O=[10,20,30,50],y=r(!1),_=r(!1),o=r({id:"",diseaseCode:"",diseaseName:"",diseaseICD:"",diseCategoryID:"",diseCategoryName:""}),B=r({constantCode:[{required:!0,message:"\u8BF7\u8F93\u5165\u9879\u7F16\u7801",trigger:"blur"}],constantName:[{required:!0,message:"\u8BF7\u8F93\u5165\u9879\u540D\u79F0",trigger:"blur"}]});Q(async()=>{f(1),S()});async function S(){const l=await x("/disecategory/page?count=1000&pn=1",null);l.result?k.value=l.data.records:l.errMsg=="\u672A\u767B\u5F55"&&router.push("/login")}async function f(d){T.value=!0;let l=`/disease/page?count=${L.value}&pn=${d}`;N!=""&&(l+=`&keyword=${N.value}`),h!=""&&(l+=`&ctype=${h.value}`);const u=await x(l,null);u.result?(c.value=u.data,T.value=!1):u.errMsg=="\u672A\u767B\u5F55"&&router.push("/login")}function j(d){f(d)}function z(d){_.value=!0,o.value=d}function E(){o.value={id:"",diseaseCode:"",diseaseName:"",diseaseICD:"",diseCategoryID:"",diseCategoryName:""}}function K(){W("/disease/update",o.value).then(d=>{d.data.result?(_.value=!1,f(c.value.current),b.alert("\u4FEE\u6539\u6210\u529F","\u63D0\u793A",{})):(result.errMsg=="\u672A\u767B\u5F55"&&router.push("/login"),b.alert(d.data.errMsg,"\u63D0\u793A",{}))})}function R(){W("/disease/add",o.value).then(d=>{d.data.result?(y.value=!1,b.alert("\u65B0\u589E\u6210\u529F","\u63D0\u793A",{})):(result.errMsg=="\u672A\u767B\u5F55"&&router.push("/login"),b.alert(d.data.errMsg,"\u63D0\u793A",{}))})}function A(d){b.confirm("\u786E\u8BA4\u662F\u5426\u5220\u9664?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(()=>{var l=new FormData;l.append("id",d),W("/disease/del",l).then(u=>{u.data.result?(f(c.value.current),b.alert("\u5220\u9664\u6210\u529F","\u63D0\u793A",{})):(result.errMsg=="\u672A\u767B\u5F55"&&router.push("/login"),b.alert(u.data.errMsg,"\u63D0\u793A",{}))})})}return(d,l)=>{const u=n("el-option"),I=n("el-select"),i=n("el-col"),p=n("el-input"),v=n("el-button"),M=n("el-row"),C=n("el-table-column"),G=n("el-table"),H=n("el-pagination"),s=n("el-form-item"),q=n("el-form"),F=n("el-dialog"),J=X("loading");return m(),w(D,null,[a(M,null,{default:t(()=>[a(i,{span:5},{default:t(()=>[V("div",Z,[a(I,{modelValue:h.value,"onUpdate:modelValue":l[0]||(l[0]=e=>h.value=e),class:"m-2",filterable:"",clearable:"",onClear:l[1]||(l[1]=e=>f(1)),placeholder:"\u75BE\u75C5\u5206\u7C7B",onChange:l[2]||(l[2]=e=>f(1))},{default:t(()=>[(m(!0),w(D,null,U(k.value,e=>(m(),$(u,{key:e.id,label:e.dicaCode+e.dicaName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1}),a(i,{span:5},{default:t(()=>[V("div",ee,[a(p,{modelValue:N.value,"onUpdate:modelValue":l[3]||(l[3]=e=>N.value=e),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u75BE\u75C5\u7F16\u7801\u6216\u540D\u79F0",class:"w-100 m-2"},null,8,["modelValue"])])]),_:1}),a(i,{span:1}),a(i,{span:4,class:"m-2"},{default:t(()=>[a(v,{type:"primary",onClick:l[4]||(l[4]=e=>f(1))},{default:t(()=>[g("\u67E5\u8BE2")]),_:1})]),_:1}),a(i,{span:5}),a(i,{span:4},{default:t(()=>[a(v,{type:"danger",onClick:l[5]||(l[5]=e=>y.value=!0)},{default:t(()=>[g("\u65B0\u589E\u8BCA\u65AD\u75BE\u75C5")]),_:1})]),_:1})]),_:1}),le,a(M,{class:"m-2"},{default:t(()=>[a(i,{span:24},{default:t(()=>[Y((m(),$(G,{data:c.value.records,style:{width:"100%"}},{default:t(()=>[a(C,{fixed:"",prop:"id",label:"\u5E8F\u53F7",width:"80",align:"center"}),a(C,{prop:"diseaseCode",label:"\u75BE\u75C5\u7F16\u7801",align:"center"}),a(C,{prop:"diseaseName",label:"\u75BE\u75C5\u540D\u79F0",align:"center"}),a(C,{prop:"diseaseICD",label:"\u56FD\u9645ICD\u7F16\u7801",align:"center"}),a(C,{prop:"diseCategoryName",label:"\u75BE\u75C5\u5206\u7C7B",align:"center"}),a(C,{fixed:"right",label:"Operations",align:"center"},{default:t(e=>[a(v,{link:"",type:"primary",onClick:P=>z(e.row)},{default:t(()=>[g("\u7F16\u8F91")]),_:2},1032,["onClick"]),a(v,{link:"",type:"danger",onClick:P=>A(e.row.id)},{default:t(()=>[g("\u5220\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[J,T.value]])]),_:1})]),_:1}),ae,a(M,null,{default:t(()=>[a(i,{span:20},{default:t(()=>[a(H,{background:"",layout:"prev, pager, next",total:c.value.total,"page-count":c.value.pages,onCurrentChange:j},null,8,["total","page-count"])]),_:1}),a(i,{span:4},{default:t(()=>[a(I,{modelValue:L.value,"onUpdate:modelValue":l[6]||(l[6]=e=>L.value=e),class:"m-2",placeholder:"\u6BCF\u9875\u884C\u6570",onChange:l[7]||(l[7]=e=>f(1))},{default:t(()=>[(m(),w(D,null,U(O,e=>a(u,{key:e,label:e,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(F,{modelValue:_.value,"onUpdate:modelValue":l[14]||(l[14]=e=>_.value=e),title:"\u7F16\u8F91",onClose:E},{footer:t(()=>[V("span",te,[a(v,{onClick:l[13]||(l[13]=e=>_.value=!1)},{default:t(()=>[g("\u53D6\u6D88")]),_:1}),a(v,{type:"primary",onClick:K},{default:t(()=>[g(" \u4FDD\u5B58 ")]),_:1})])]),default:t(()=>[a(q,{model:o.value,rules:B.value},{default:t(()=>[a(s,{label:"\u7F16\u53F7","label-width":d.formLabelWidth,prop:"id"},{default:t(()=>[a(p,{modelValue:o.value.id,"onUpdate:modelValue":l[8]||(l[8]=e=>o.value.id=e),readonly:"",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"\u75BE\u75C5\u5206\u7C7B","label-width":d.formLabelWidth,prop:"constantTypeCode"},{default:t(()=>[a(I,{modelValue:o.value.diseCategoryID,"onUpdate:modelValue":l[9]||(l[9]=e=>o.value.diseCategoryID=e),class:"m-2",filterable:"",placeholder:"\u75BE\u75C5\u5206\u7C7B"},{default:t(()=>[(m(!0),w(D,null,U(k.value,e=>(m(),$(u,{key:e.id,label:e.dicaCode+e.dicaName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"\u75BE\u75C5\u7F16\u7801","label-width":d.formLabelWidth,prop:"constantTypeCode"},{default:t(()=>[a(p,{modelValue:o.value.diseaseCode,"onUpdate:modelValue":l[10]||(l[10]=e=>o.value.diseaseCode=e),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"\u75BE\u75C5\u540D\u79F0","label-width":d.formLabelWidth,prop:"constantTypeName"},{default:t(()=>[a(p,{modelValue:o.value.diseaseName,"onUpdate:modelValue":l[11]||(l[11]=e=>o.value.diseaseName=e),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"\u56FD\u9645ICD\u7F16\u7801","label-width":d.formLabelWidth,prop:"constantTypeName"},{default:t(()=>[a(p,{modelValue:o.value.diseaseICD,"onUpdate:modelValue":l[12]||(l[12]=e=>o.value.diseaseICD=e),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),a(F,{modelValue:y.value,"onUpdate:modelValue":l[21]||(l[21]=e=>y.value=e),title:"\u65B0\u589E",onClose:E},{footer:t(()=>[V("span",oe,[a(v,{onClick:l[20]||(l[20]=e=>y.value=!1)},{default:t(()=>[g("\u53D6\u6D88")]),_:1}),a(v,{type:"primary",onClick:R},{default:t(()=>[g(" \u65B0\u589E ")]),_:1})])]),default:t(()=>[a(q,{model:o.value,rules:B.value},{default:t(()=>[a(s,{label:"\u7F16\u53F7","label-width":d.formLabelWidth,prop:"id"},{default:t(()=>[a(p,{modelValue:o.value.id,"onUpdate:modelValue":l[15]||(l[15]=e=>o.value.id=e),readonly:"",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"\u75BE\u75C5\u5206\u7C7B","label-width":d.formLabelWidth,prop:"constantTypeCode"},{default:t(()=>[a(I,{modelValue:o.value.diseCategoryID,"onUpdate:modelValue":l[16]||(l[16]=e=>o.value.diseCategoryID=e),class:"m-2",filterable:"",placeholder:"\u75BE\u75C5\u5206\u7C7B"},{default:t(()=>[(m(!0),w(D,null,U(k.value,e=>(m(),$(u,{key:e.id,label:e.dicaCode+e.dicaName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"\u75BE\u75C5\u7F16\u7801","label-width":d.formLabelWidth,prop:"constantTypeCode"},{default:t(()=>[a(p,{modelValue:o.value.diseaseCode,"onUpdate:modelValue":l[17]||(l[17]=e=>o.value.diseaseCode=e),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"\u75BE\u75C5\u540D\u79F0","label-width":d.formLabelWidth,prop:"constantTypeName"},{default:t(()=>[a(p,{modelValue:o.value.diseaseName,"onUpdate:modelValue":l[18]||(l[18]=e=>o.value.diseaseName=e),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"\u56FD\u9645ICD\u7F16\u7801","label-width":d.formLabelWidth,prop:"constantTypeName"},{default:t(()=>[a(p,{modelValue:o.value.diseaseICD,"onUpdate:modelValue":l[19]||(l[19]=e=>o.value.diseaseICD=e),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])],64)}}};export{se as default};
